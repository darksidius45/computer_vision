from picamera2 import Picamera2
from picamera2.encoders import H264Encoder
from picamera2.outputs import FfmpegOutput
import time
 
# ??????? ?????? ??? ?????? ? ???????
camera = Picamera2()
target_fps = 30.0
file_name="set_up.mp4"
camera_config = camera.create_video_configuration(
                main={"size": (1920, 1080), "format": "RGB888"}, 
                controls={"FrameRate": target_fps}
            )
camera.configure(camera_config)
encoder = H264Encoder(10000000)
output = FfmpegOutput(file_name)
# ????? ????????? ????? ? ??????? ????? ??????
# ? ????????? ??? ?? ??????? ???? ? ??????? h264
camera.start_recording(encoder, output)
time.sleep(10)
camera.stop_recording()

